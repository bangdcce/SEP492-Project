<table border="1" style="border-collapse: collapse; width: 100%; font-family: Arial, sans-serif; font-size: 11pt;">
  <tr>
    <td style="width: 20%; padding: 8px; font-weight: bold;">UC ID and Name:</td>
    <td colspan="3" style="padding: 8px; font-weight: bold;">UC-40 Register New Subscription</td>
  </tr>
  <tr>
    <td style="padding: 8px; font-weight: bold;">Created By:</td>
    <td style="width: 30%; padding: 8px;">An</td>
    <td style="width: 20%; padding: 8px; font-weight: bold;">Date Created:</td>
    <td style="width: 30%; padding: 8px;">23/01/2026</td>
  </tr>
  <tr>
    <td style="padding: 8px; font-weight: bold;">Primary Actor:</td>
    <td style="padding: 8px;">User (Client, Broker, Freelancer)</td>
    <td style="padding: 8px; font-weight: bold;">Secondary Actors:</td>
    <td style="padding: 8px;">Payment Gateway</td>
  </tr>
  <tr>
    <td style="padding: 8px; font-weight: bold;">Trigger:</td>
    <td colspan="3" style="padding: 8px;">User clicks on "Upgrade Plan" or selects a Premium feature.</td>
  </tr>
  <tr>
    <td style="padding: 8px; font-weight: bold;">Description:</td>
    <td colspan="3" style="padding: 8px;">Allows the user to subscribe to a premium membership plan to unlock advanced features (e.g., Lower fees, Verified Badge, Priority Support). The user selects a plan, provides payment details, and the system activates the subscription.</td>
  </tr>
  <tr>
    <td style="padding: 8px; font-weight: bold;">Preconditions:</td>
    <td colspan="3" style="padding: 8px;">
      <b>PRE1:</b> The user is logged into the system.<br>
      <b>PRE2:</b> The user does not have an active subscription of the same or higher tier.
    </td>
  </tr>
  <tr>
    <td style="padding: 8px; font-weight: bold;">Post-conditions:</td>
    <td colspan="3" style="padding: 8px;">
      <b>POS1:</b> The user's account is upgraded to the selected plan.<br>
      <b>POS2:</b> A recurring billing profile is established.<br>
      <b>POS3:</b> An invoice is generated and sent to the user.
    </td>
  </tr>
  <tr>
    <td style="padding: 8px; font-weight: bold;">Normal Flow:</td>
    <td colspan="3" style="padding: 8px;">
      <b>A. Register Subscription Successfully</b>
      <ol>
        <li>User navigates to the "Membership Plans" page.</li>
        <li>System displays available plans (e.g., Free, Plus, Pro) with benefits and pricing.</li>
        <li>User clicks "Subscribe" on the desired plan.</li>
        <li>System redirects user to the Payment/Checkout page (UC-48).</li>
        <li>User selects a payment method and confirms the transaction.</li>
        <li>System validates the payment with the Payment Gateway.</li>
        <li>Payment Gateway confirms success.</li>
        <li>System activates the subscription and updates the user's profile.</li>
        <li>System displays a success message.</li>
      </ol>
    </td>
  </tr>
  <tr>
    <td style="padding: 8px; font-weight: bold;">Alternative Flows:</td>
    <td colspan="3" style="padding: 8px;">
      <b>A7. Payment Failed</b>
      <ul>
        <li>At step 7, Payment Gateway rejects the transaction (insufficient funds, invalid card).</li>
        <li>System displays an error message explaining the reason.</li>
        <li>System allows user to retry or choose a different payment method.</li>
      </ul>
    </td>
  </tr>
  <tr>
    <td style="padding: 8px; font-weight: bold;">Exceptions:</td>
    <td colspan="3" style="padding: 8px;">
      <b>EXC-01:</b> System Error during activation
      <ul>
        <li>Payment succeeds but internal system fails to update status.</li>
        <li>System logs the error for Admin and notifies the user to contact support.</li>
      </ul>
    </td>
  </tr>
  <tr>
    <td style="padding: 8px; font-weight: bold;">Priority:</td>
    <td colspan="3" style="padding: 8px;">Medium</td>
  </tr>
  <tr>
    <td style="padding: 8px; font-weight: bold;">Frequency of Use:</td>
    <td colspan="3" style="padding: 8px;">Low (Once per cycle)</td>
  </tr>
  <tr>
    <td style="padding: 8px; font-weight: bold;">Business Rules:</td>
    <td colspan="3" style="padding: 8px;">BR-01 (Data validation)</td>
  </tr>
  <tr>
    <td style="padding: 8px; font-weight: bold;">Other Information:</td>
    <td colspan="3" style="padding: 8px;">N/A</td>
  </tr>
  <tr>
    <td style="padding: 8px; font-weight: bold;">Assumptions:</td>
    <td colspan="3" style="padding: 8px;">Payment Gateway is operational.</td>
  </tr>
</table>
